(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{7737:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.id?s("div",{staticClass:"row q-pa-md"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"full-width q-pa-md",staticStyle:{"min-height":"80vh"}},[e._t("form"),e.hideFooter?e._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 flex justify-end"},[s("q-btn",{staticClass:"q-mr-sm q-my-sm",attrs:{color:"primary",unelevated:"",label:"Salvar registro",icon:"las la-save"},on:{click:function(t){return e.saveItem()}}}),s("q-btn",{staticClass:"q-my-sm",attrs:{color:"negative",unelevated:"",label:"Limpar formulário",icon:"las la-sync"},on:{click:function(t){return e.resetForm()}}})],1)])],2)],1)]):s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-end"},[s("q-btn",{staticClass:"q-mr-sm q-my-sm",attrs:{color:"primary",unelevated:"",label:"Novo registro",icon:"las la-plus"},on:{click:function(t){return e.redirectItem()}}}),s("q-btn",{staticClass:"q-my-sm",attrs:{color:"negative",unelevated:"",label:"Excluir registros",icon:"las la-trash",disabled:!e.selected.length},on:{click:function(t){return e.deleteItems()}}})],1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-pa-sm"},[s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Pesquisar..."},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getItems()}},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"las la-search"},on:{click:function(t){return e.getItems()}}})]},proxy:!0}],null,!1,2430780537),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),s("q-table",{attrs:{data:e.items.data,columns:e.columns,"row-key":"id",selection:"multiple",selected:e.selected,"hide-pagination":"",loading:e.loading_data},on:{"update:selected":function(t){e.selected=t},"row-dblclick":function(t,s,a){return e.redirectItem(s.id)}}}),s("q-pagination",{staticClass:"justify-center q-my-sm",attrs:{color:"primary",max:e.items.last_page,"max-pages":6,"boundary-numbers":""},on:{input:e.getItems},model:{value:e.items.current_page,callback:function(t){e.$set(e.items,"current_page",t)},expression:"items.current_page"}})],1)])])},r=[],o=(s("a79d"),{name:"PageData",props:["id","data","columns","hide-footer"],data:()=>({form:{},loading_data:!1,search:"",items:{},selected:[],errors:{}}),computed:{endpoint:function(){let e=this.$route.fullPath.split("/");return e.pop(),e.join("/")}},watch:{data:function(e){Object.keys(e).length&&(this.form=this.data)}},methods:{getItems(e=1){let t=this;t.loading_data=!0,t.$axios.get(`${t.$route.fullPath}?page=${e}&search=${t.search}`).then((({data:e})=>t.items=e)).catch((e=>{403==e.response.status?t.$swal.fire("Erro!","Você não tem permissão para esta operação!","error"):t.$swal.fire("Erro!","Ocorreu um erro ao tentar listar registros!","error")})).finally((()=>{t.loading_data=!1}))},getItem(){let e=this;e.id&&"new"!=e.id&&e.$axios.get(e.$route.fullPath).then((({data:t})=>{e.$emit("load-data",t),e.form=t})).catch((t=>{403==t.response.status?e.$swal.fire("Erro!","Você não tem permissão para esta operação!","error"):e.$swal.fire("Erro!","Ocorreu um erro ao tentar exibir dados!","error")}))},redirectItem(e="new"){location.href=`${location.origin}${this.$route.fullPath}/${e}`},saveItem(){let e=this;e.$loadingMsg("Salvando alterações");let t=(t,s)=>{e.$axios.post(t,e.form).then((({data:t})=>{e.$swal.fire("Sucesso",`Cadastro ${s} com sucesso!`,"success").then((t=>{location.href=`${location.origin}${e.endpoint}`}))})).catch((t=>{422==t.response.status&&t.response.hasOwnProperty("data")?(e.$swal.fire("Erro!","Ocorreram erros de validação","error"),e.$emit("error",t.response.data.errors)):403==t.response.status?e.$swal.fire("Erro!","Você não tem permissão para esta operação!","error"):e.$swal.fire("Erro!","Ocorreu um erro ao tentar salvar os dados","error")}))};"new"==e.id?t(`${e.endpoint}/store`,"criado"):parseInt(e.id)&&t(`${e.endpoint}/update/${e.id}`,"atualizado")},deleteItems(){let e=this;e.$swal.fire({title:"Excluir",icon:"question",text:"Deseja remover os items selecionados?",showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&(e.$loadingMsg("Removendo registros"),e.$axios.delete(`${e.$route.fullPath}/delete`,{data:{items:e.selected.map((e=>e.id))}}).then((t=>{e.$swal.fire("Sucesso!","Items removidos com sucesso!","success"),e.selected=[],e.getItems(e.items.current_page)})).catch((t=>{403==t.response.status?e.$swal.fire("Erro!","Você não tem permissão para esta operação!","error"):e.$swal.fire("Erro!","Ocorreu um erro ao tentar excluir os items!","error")})))}))},resetForm(){let e=this,t={id:e.form.id};e.$emit("load-data",t),e.form=t}},mounted(){this.id&&"new"!=this.id?this.getItem():"new"!=this.id&&this.getItems()}}),i=o,l=s("2877"),n=s("9c40"),c=s("27f9"),m=s("0016"),d=s("eaac"),p=s("3b16"),u=s("f09f"),v=s("eebe"),f=s.n(v),g=Object(l["a"])(i,a,r,!1,null,null,null);t["a"]=g.exports;f()(g,"components",{QBtn:n["a"],QInput:c["a"],QIcon:m["a"],QTable:d["a"],QPagination:p["a"],QCard:u["a"]})},93931:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page-data",{attrs:{id:e.id,data:e.form,columns:e.columns},on:{"load-data":function(t){e.form=Object.assign({},e.form,t)},error:function(t){e.errors=t}},scopedSlots:e._u([{key:"form",fn:function(){return[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Nome"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite o Nome"},on:{input:function(t){e.form.name=e.$toUpper(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"name")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("E-mail"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite o E-mail"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"email")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Telefone:"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{directives:[{name:"maska",rawName:"v-maska",value:e.$masks("phone"),expression:"$masks('phone')"}],attrs:{dense:"",outlined:"",placeholder:"(00) 00000-0000"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"phone")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Data de Nascimento:"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{directives:[{name:"maska",rawName:"v-maska",value:e.$masks("date"),expression:"$masks('date')"}],attrs:{dense:"",outlined:"",placeholder:"Digite a data"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"las la-calendar"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{mask:"DD/MM/YYYY"},model:{value:e.form.birth_date,callback:function(t){e.$set(e.form,"birth_date",t)},expression:"form.birth_date"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.form.birth_date,callback:function(t){e.$set(e.form,"birth_date",t)},expression:"form.birth_date"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"birth_date")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("CPF"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{directives:[{name:"maska",rawName:"v-maska",value:e.$masks("cpf"),expression:"$masks('cpf')"}],attrs:{dense:"",outlined:"",placeholder:"Digite o CPF"},model:{value:e.form.cpf,callback:function(t){e.$set(e.form,"cpf",t)},expression:"form.cpf"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"cpf")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("RG:"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{directives:[{name:"maska",rawName:"v-maska",value:e.$masks("rg"),expression:"$masks('rg')"}],attrs:{dense:"",outlined:"",placeholder:"Digite o RG"},model:{value:e.form.rg,callback:function(t){e.$set(e.form,"rg",t)},expression:"form.rg"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"rg")))])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 text-h6"},[e._v("Endereço")]),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("CEP"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{directives:[{name:"maska",rawName:"v-maska",value:e.$masks("cep"),expression:"$masks('cep')"}],attrs:{dense:"",outlined:"",placeholder:"Digite o CEP"},on:{blur:function(t){return e.updateAddress()}},model:{value:e.form.cep,callback:function(t){e.$set(e.form,"cep",t)},expression:"form.cep"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"cep")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Rua"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite a Rua"},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"street")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Complemento"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite o Complemento"},model:{value:e.form.complement,callback:function(t){e.$set(e.form,"complement",t)},expression:"form.complement"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"complement")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Número"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite o Número"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"number")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Bairro"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite o Bairro"},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"district")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Cidade"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-input",{attrs:{dense:"",outlined:"",placeholder:"Digite a Cidade"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}}),s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"city")))])],1),s("div",{staticClass:"col-12 col-sm-6 q-pa-sm"},[s("div",{staticClass:"q-pb-sm"},[e._v("Estado"),s("span",{staticClass:"text-negative"},[e._v("*")]),e._v(":")]),s("q-select",{attrs:{dense:"",outlined:"",placeholder:"Digite o estado","emit-value":"","map-options":"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","dropdown-icon":"las la-angle-down",options:e.states.data},model:{value:e.form.state_id,callback:function(t){e.$set(e.form,"state_id",t)},expression:"form.state_id"}},[s("p",{staticClass:"text-negative"},[e._v(e._s(e.$getError(e.errors,"state_id")))])])],1)])]},proxy:!0}])})},r=[],o=s("7737"),i={name:"Patients",props:["id"],components:{PageData:o["a"]},data:()=>({form:{street:null,complement:null,number:null,city:null,state_id:null},errors:{},columns:[{field:"id",label:"Cód."},{field:"name",label:"Nome"},{field:"cpf",label:"CPF"},{field:"email",label:"E-mail"},{field:"phone",label:"Telefone"},{field:"created_at",label:"Criado em"},{field:"updated_at",label:"Editado em"}],states:{data:[],filtered:[]}}),methods:{getStates(){let e=this;e.$axios.get("admin/patients/states").then((({data:t})=>e.states.data=t)).catch((t=>e.$swal.fire("Erro","Ocorreu um erro ao listar estados!","error")))},updateAddress(){let e=this;e.$getCep(e.form.cep).then((t=>{e.form.street=t.logradouro,e.form.complement=t.complemento,e.form.district=t.bairro,e.form.city=t.localidade,e.form.state_id=e.states.data.find((e=>e.symbol==t.uf)).value}))}},mounted(){this.getStates()}},l=i,n=s("2877"),c=s("27f9"),m=s("0016"),d=s("7cbe"),p=s("52ee"),u=s("9c40"),v=s("ddd8"),f=s("7f67"),g=s("eebe"),_=s.n(g),h=Object(n["a"])(l,a,r,!1,null,null,null);t["default"]=h.exports;_()(h,"components",{QInput:c["a"],QIcon:m["a"],QPopupProxy:d["a"],QDate:p["a"],QBtn:u["a"],QSelect:v["a"]}),_()(h,"directives",{ClosePopup:f["a"]})}}]);